<div fxFlex="column" class="wrapper">
  <div fxLayout="row" fxLayoutAlign="space-between center">
    <h1 mat-dialog-title>Фильтр</h1>
    <button class="filter-button" mat-icon-button color="accent"(click)="reload()">
      <mat-icon>update</mat-icon>
    </button>
  </div>
  <div fxFlex="100" fxFlex="row" mat-dialog-content class="info-block">
    <form [formGroup]="filterForm">
      <mat-form-field fxFlex="100">
        <mat-label>Корпус</mat-label>
        <mat-select formControlName="corpus" (selectionChange)="corpusChange()" [(ngModel)]="room.corpus">
          <mat-option *ngFor="let item of [0, 1, 2, 3, 4, 5, 6, 7, 8]" [value]="item">{{item}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field hintLabel="Максимальное число знаков 4">
        <mat-label>Номер комнаты</mat-label>
        <input type="number" matInput #num maxlength="4" (change)="corpusChange()" formControlName="num" [(ngModel)]="room.num">
      </mat-form-field>

      <mat-form-field>
        <mat-label>Тип помещения</mat-label>
        <mat-select formControlName="type" [(ngModel)]="room.type.name" (selectionChange)="typeChange($event)">
          <mat-option *ngFor="let item of types" [value]="item.name">{{item.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field fxFlex="100">
        <mat-label>Головное структурное подразделение</mat-label>
        <mat-select formControlName="department" [(ngModel)]="room.subdepartment.department.name" (selectionChange)="changeSubdepartment($event)">
          <mat-option *ngFor="let item of departments" [value]="item.name">{{item.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field fxFlex="100">
        <mat-label>Структурное подразделение</mat-label>
        <mat-select formControlName="subdepartment" [(ngModel)]="room.subdepartment.name" (selectionChange)="subdepartmentChange($event)" (selectionChange)="corpusChange()" >
          <mat-option *ngFor="let item of subdep" [value]="item.name">{{item.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field hintLabel="Максимальное число знаков 4">
        <mat-label>Площадь м.кв.</mat-label>
        <input type="number" (change)="corpusChange()" matInput #squar maxlength="4" (selectionChange)="corpusChange()" [(ngModel)]="room.squar" formControlName="squar">
      </mat-form-field>

      <mat-form-field hintLabel="Максимальное число знаков 50">
        <mat-label>Ответственное лицо</mat-label>
        <input matInput #owner (change)="corpusChange()" maxlength="50" (selectionChange)="corpusChange()" formControlName="owner" [(ngModel)]="room.owner">
      </mat-form-field>

    </form>
  </div>
  <div mat-dialog-actions align="center">
    <button type="button" mat-button (click)="onNoClick()">Закрыть</button>
    <button type="submit" mat-raised-button color="primary" (click)="filter()">Показать{{buttonLabel}}</button>
  </div>
</div>
